pipeline {
    agent {
        docker {
            image 'amazonlinux:2'
            label 'docker'
            // Remove unnecessary volume mapping
        }
    }
    environment {
        DOCKER_USER = 'root'
    }
    stages {
        stage('Install Dependencies') {
            steps {
                // Remove unnecessary root switching stage
                // Use 'sh' command without sudo since container is running as root
                sh 'yum update -y'
                sh 'yum install -y git wget curl'
            }
        }
        stage('Build') {
            steps {
                sh 'echo "Building application..."'
            }
        }
        stage('Test') {
            steps {
                sh 'echo "Running tests..."'
            }
        }
    }
    post {
        always {
            echo 'Cleaning up...'
        }
    }
}
